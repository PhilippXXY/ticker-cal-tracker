@startuml sequence_diagram_delete_watchlist
title Delete Watchlist - Sequence Diagram

actor User
participant "Application" as APP
database "SQL Database" as DB

User -> APP: DELETE /api/watchlists/{watchlist_id}

== Authentication & Validation ==
APP -> APP: Validate user authentication and permission
APP -> APP: Validate payload

== Check Watchlist Existence ==
APP -> DB: SELECT id FROM watchlist WHERE id = :watchlist_id AND user_id = :user_id
alt watchlist not found
    APP --> User: 404 Not Found
else watchlist found
    == Delete Watchlist and Dependencies ==
    APP -> DB: DELETE FROM follow WHERE watchlist_id = :watchlist_id
    APP -> DB: DELETE FROM watchlist WHERE id = :watchlist_id
    APP --> User: 204 No Content
end
@enduml